<VirtualHost *:80>
    # Nom du serveur
    ServerName localhost

    # Passer l'entête Authorization à PHP si nécessaire (décommente si tu utilises basic_auth)
    # SetEnvIfNoCase ^Authorization$ "(.+)" HTTP_AUTHORIZATION=$1

    # Gestion des fichiers PHP avec Apache et PHP-FPM
    <FilesMatch \.php$>
        # Si tu utilises PHP-FPM avec un socket Unix (assure-toi que le socket existe)
        SetHandler proxy:unix:/var/run/php/php8.1-fpm.sock|fcgi://localhost

        # Si tu utilises PHP-FPM en TCP (décommente si nécessaire)
        # SetHandler proxy:fcgi://127.0.0.1:9000
    </FilesMatch>

    # Répertoire de ton projet (modifie le chemin en fonction de ton projet)
    DocumentRoot /var/www/html/public
    <Directory /var/www/html/public>
        # Permettre la réécriture d'URL et autres configurations
        AllowOverride All
        Require all granted

        # Assurer que Symfony utilise le FallbackResource pour toutes les requêtes non gérées
        FallbackResource /index.php
    </Directory>

    # Pour les répertoires d'assets, si tu utilises des liens symboliques
    # <Directory /var/www/html>
    #     Options FollowSymlinks
    # </Directory>

    # Si tu veux une gestion spécifique des assets, tu peux ajuster comme suit
    # <Directory /var/www/html/public/bundles>
    #     DirectoryIndex disabled
    #     FallbackResource disabled
    # </Directory>

    # Logs d'erreur et d'accès
    ErrorLog /var/log/apache2/project_error.log
    CustomLog /var/log/apache2/project_access.log combined
</VirtualHost>
